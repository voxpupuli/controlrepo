# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`profiles::base`](#profiles--base): ssh profile to manage basic stuff that doesn't fit into a dedicated profile
* [`profiles::borg`](#profiles--borg): configures borg backups
* [`profiles::certbot`](#profiles--certbot): configures the certbot foo. Doesn't create certificates!
* [`profiles::grafana`](#profiles--grafana): installs grafana to display stats from dropsonde about Vox Pupuli modules
* [`profiles::nginx`](#profiles--nginx): multiple profiles requires nginx vhosts, this profile pulls in the nginx class/package/service setup
* [`profiles::node_exporter`](#profiles--node_exporter): install node_exporter
* [`profiles::postfix`](#profiles--postfix): installs postfix
* [`profiles::postgres_exporter`](#profiles--postgres_exporter): installs a postgres exporter
* [`profiles::postgresql`](#profiles--postgresql): install latest postgresql with upstream repositories
* [`profiles::prometheus`](#profiles--prometheus): install Prometheus
* [`profiles::puppet`](#profiles--puppet): configure puppet agent and server
* [`profiles::puppetcode`](#profiles--puppetcode): some resources to manage puppete code
* [`profiles::puppetmodule`](#profiles--puppetmodule): configures puppetmodule.info
* [`profiles::puppetserver_firewalling`](#profiles--puppetserver_firewalling): manages nft rules on Puppetserver/PuppetDB
* [`profiles::ssh`](#profiles--ssh): ssh profile to manage sshd + ssh keys
* [`profiles::ssh_keys`](#profiles--ssh_keys): configure keys from GitHubs in the authorized_keys file
* [`profiles::vpt`](#profiles--vpt): this profile will, in the future, instal Vox Pupuli Tasks

### Defined types

* [`profiles::certbot::nginx`](#profiles--certbot--nginx): configures location blocks for nginx

## Classes

### <a name="profiles--base"></a>`profiles::base`

ssh profile to manage basic stuff that doesn't fit into a dedicated profile

#### Parameters

The following parameters are available in the `profiles::base` class:

* [`manage_borg`](#-profiles--base--manage_borg)

##### <a name="-profiles--base--manage_borg"></a>`manage_borg`

Data type: `Boolean`

whether borg should be installed or not

Default value: `true`

### <a name="profiles--borg"></a>`profiles::borg`

configures borg backups

#### Parameters

The following parameters are available in the `profiles::borg` class:

* [`borg_excludes`](#-profiles--borg--borg_excludes)
* [`borg_includes`](#-profiles--borg--borg_includes)
* [`borg_compression`](#-profiles--borg--borg_compression)
* [`borg_keep_yearly`](#-profiles--borg--borg_keep_yearly)
* [`borg_keep_monthly`](#-profiles--borg--borg_keep_monthly)
* [`borg_keep_weekly`](#-profiles--borg--borg_keep_weekly)
* [`borg_keep_daily`](#-profiles--borg--borg_keep_daily)
* [`borg_keep_within`](#-profiles--borg--borg_keep_within)
* [`absolutebackupdestdir`](#-profiles--borg--absolutebackupdestdir)

##### <a name="-profiles--borg--borg_excludes"></a>`borg_excludes`

Data type: `Array[Stdlib::Absolutepath]`

paths you do not want to backup

Default value: `[]`

##### <a name="-profiles--borg--borg_includes"></a>`borg_includes`

Data type: `Array[Stdlib::Absolutepath]`

additional dirs you want to backup

Default value: `[]`

##### <a name="-profiles--borg--borg_compression"></a>`borg_compression`

Data type: `String[1]`

the desired compression algo for borg

Default value: `'auto,zstd,6'`

##### <a name="-profiles--borg--borg_keep_yearly"></a>`borg_keep_yearly`

Data type: `Integer[0]`

how many years to backup

Default value: `3`

##### <a name="-profiles--borg--borg_keep_monthly"></a>`borg_keep_monthly`

Data type: `Integer[0]`

how many months to backup

Default value: `6`

##### <a name="-profiles--borg--borg_keep_weekly"></a>`borg_keep_weekly`

Data type: `Integer[0]`

how many weeks to backup

Default value: `4`

##### <a name="-profiles--borg--borg_keep_daily"></a>`borg_keep_daily`

Data type: `Integer[0]`

how many days to backup

Default value: `14`

##### <a name="-profiles--borg--borg_keep_within"></a>`borg_keep_within`

Data type: `Integer[0]`

how many days to keep all created backups

Default value: `14`

##### <a name="-profiles--borg--absolutebackupdestdir"></a>`absolutebackupdestdir`

Data type: `String[1]`

the subdir on the backupserver where borg places backups

Default value: `$facts['networking']['hostname']`

### <a name="profiles--certbot"></a>`profiles::certbot`

configures the certbot foo. Doesn't create certificates!

### <a name="profiles--grafana"></a>`profiles::grafana`

installs grafana to display stats from dropsonde about Vox Pupuli modules

* **See also**
  * https://dev.to/puppet/help-us-understand-how-you-use-open-source-puppet-51aj
  * https://grafana.com/tutorials/run-grafana-behind-a-proxy/

#### Parameters

The following parameters are available in the `profiles::grafana` class:

* [`postgresql_password`](#-profiles--grafana--postgresql_password)
* [`postgresql_user`](#-profiles--grafana--postgresql_user)
* [`postgresql_database`](#-profiles--grafana--postgresql_database)

##### <a name="-profiles--grafana--postgresql_password"></a>`postgresql_password`

Data type: `Variant[String[1],Sensitive]`



Default value: `'023745uoehr98325yrsehrw023y4'`

##### <a name="-profiles--grafana--postgresql_user"></a>`postgresql_user`

Data type: `String[1]`



Default value: `'grafana'`

##### <a name="-profiles--grafana--postgresql_database"></a>`postgresql_database`

Data type: `String[1]`



Default value: `$postgresql_user`

### <a name="profiles--nginx"></a>`profiles::nginx`

multiple profiles requires nginx vhosts, this profile pulls in the nginx class/package/service setup

### <a name="profiles--node_exporter"></a>`profiles::node_exporter`

install node_exporter

### <a name="profiles--postfix"></a>`profiles::postfix`

installs postfix

### <a name="profiles--postgres_exporter"></a>`profiles::postgres_exporter`

installs a postgres exporter

### <a name="profiles--postgresql"></a>`profiles::postgresql`

install latest postgresql with upstream repositories

#### Parameters

The following parameters are available in the `profiles::postgresql` class:

* [`version`](#-profiles--postgresql--version)

##### <a name="-profiles--postgresql--version"></a>`version`

Data type: `Enum['11', '12', '13', '14']`

desired postgresql version

Default value: `'13'`

### <a name="profiles--prometheus"></a>`profiles::prometheus`

install Prometheus

### <a name="profiles--puppet"></a>`profiles::puppet`

configure puppet agent and server

#### Parameters

The following parameters are available in the `profiles::puppet` class:

* [`server`](#-profiles--puppet--server)
* [`manage_msgpack`](#-profiles--puppet--manage_msgpack)

##### <a name="-profiles--puppet--server"></a>`server`

Data type: `Boolean`

decide if the server should be configured as well

Default value: `($trusted['pp_role'] == 'puppetserver'`

##### <a name="-profiles--puppet--manage_msgpack"></a>`manage_msgpack`

Data type: `Boolean`

configure if we should install msgpack on the agent

Default value: `($facts['os']['name'] != 'gentoo'`

### <a name="profiles--puppetcode"></a>`profiles::puppetcode`

some resources to manage puppete code

### <a name="profiles--puppetmodule"></a>`profiles::puppetmodule`

configures puppetmodule.info

* **See also**
  * https://puppetmodule.info
  * https://github.com/puma/puma/blob/master/docs/nginx.md

#### Parameters

The following parameters are available in the `profiles::puppetmodule` class:

* [`domain`](#-profiles--puppetmodule--domain)
* [`postgresql_password`](#-profiles--puppetmodule--postgresql_password)
* [`postgresql_database`](#-profiles--puppetmodule--postgresql_database)
* [`postgresql_user`](#-profiles--puppetmodule--postgresql_user)

##### <a name="-profiles--puppetmodule--domain"></a>`domain`

Data type: `Stdlib::Fqdn`

the url to the site *without www*

Default value: `'puppetmodule.info'`

##### <a name="-profiles--puppetmodule--postgresql_password"></a>`postgresql_password`

Data type: `Variant[String[1],Sensitive]`

the database password

Default value: `'oehr384yhg034y5oreihu04y5'`

##### <a name="-profiles--puppetmodule--postgresql_database"></a>`postgresql_database`

Data type: `String[1]`

the database name

Default value: `$postgresql_user`

##### <a name="-profiles--puppetmodule--postgresql_user"></a>`postgresql_user`

Data type: `String[1]`

the database user

Default value: `'puppetmodule'`

### <a name="profiles--puppetserver_firewalling"></a>`profiles::puppetserver_firewalling`

manages nft rules on Puppetserver/PuppetDB

### <a name="profiles--ssh"></a>`profiles::ssh`

ssh profile to manage sshd + ssh keys

### <a name="profiles--ssh_keys"></a>`profiles::ssh_keys`

configure keys from GitHubs in the authorized_keys file

#### Parameters

The following parameters are available in the `profiles::ssh_keys` class:

* [`github_users`](#-profiles--ssh_keys--github_users)

##### <a name="-profiles--ssh_keys--github_users"></a>`github_users`

Data type: `Array[String[1]]`

list of github users, we will download their ssh keys

Default value: `['bastelfreak', 'smortex', 'rwaffen', 'ekohl', 'sebastianrakel',]`

### <a name="profiles--vpt"></a>`profiles::vpt`

this profile will, in the future, instal Vox Pupuli Tasks

* **See also**
  * https://github.com/voxpupuli/vox-pupuli-tasks

#### Parameters

The following parameters are available in the `profiles::vpt` class:

* [`deploy_sentry`](#-profiles--vpt--deploy_sentry)
* [`deploy_vpt`](#-profiles--vpt--deploy_vpt)
* [`deploy_kibana`](#-profiles--vpt--deploy_kibana)

##### <a name="-profiles--vpt--deploy_sentry"></a>`deploy_sentry`

Data type: `Boolean`

manage the sentry nginx config

Default value: `true`

##### <a name="-profiles--vpt--deploy_vpt"></a>`deploy_vpt`

Data type: `Boolean`

manage the VPT nginx config

Default value: `true`

##### <a name="-profiles--vpt--deploy_kibana"></a>`deploy_kibana`

Data type: `Boolean`

manage the kibana nginx config

Default value: `true`

## Defined types

### <a name="profiles--certbot--nginx"></a>`profiles::certbot::nginx`

configures location blocks for nginx

#### Parameters

The following parameters are available in the `profiles::certbot::nginx` defined type:

* [`domain`](#-profiles--certbot--nginx--domain)

##### <a name="-profiles--certbot--nginx--domain"></a>`domain`

Data type: `Stdlib::Fqdn`

the domain for the location blocks

Default value: `$title`

